{% comment %}
  ICONIC DOG GALLERY - SIMPLE VERSION
  Shows only pre-generated iconic dog images
  No upload functionality
{% endcomment %}

<style>
  .iconic-gallery {
    max-width: 1400px;
    margin: 0 auto;
    padding: 40px 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .page-header {
    text-align: center;
    padding: 60px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    color: white;
    margin-bottom: 60px;
  }

  .page-header h1 {
    font-size: 3.5em;
    margin-bottom: 20px;
    font-weight: 800;
  }

  .page-header p {
    font-size: 1.3em;
    opacity: 0.95;
    max-width: 700px;
    margin: 0 auto;
  }

  .filter-buttons {
    text-align: center;
    margin-bottom: 40px;
  }

  .filter-btn {
    display: inline-block;
    padding: 12px 30px;
    margin: 5px;
    background: white;
    border: 2px solid #667eea;
    color: #667eea;
    border-radius: 25px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }

  .filter-btn:hover,
  .filter-btn.active {
    background: #667eea;
    color: white;
  }

  .dogs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 35px;
  }

  .dog-item {
    background: white;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    transition: all 0.3s;
  }

  .dog-item:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  }

  .dog-img {
    width: 100%;
    height: 320px;
    object-fit: cover;
  }

  .dog-details {
    padding: 22px;
  }

  .dog-category {
    display: inline-block;
    background: #667eea;
    color: white;
    padding: 6px 16px;
    border-radius: 15px;
    font-size: 0.85em;
    font-weight: 600;
    margin-bottom: 12px;
  }

  .dog-title {
    font-size: 1.6em;
    font-weight: 700;
    margin-bottom: 8px;
    color: #333;
  }

  .dog-desc {
    color: #666;
    margin-bottom: 18px;
    line-height: 1.5;
    font-size: 1.05em;
  }

  .shop-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.15em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
  }

  .shop-btn:hover {
    transform: scale(1.03);
    box-shadow: 0 5px 18px rgba(40, 167, 69, 0.4);
  }

  .loading {
    text-align: center;
    padding: 60px 20px;
    font-size: 1.3em;
    color: #667eea;
  }

  @media (max-width: 768px) {
    .page-header h1 {
      font-size: 2.2em;
    }
    .dogs-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<div class="iconic-gallery">
  <div class="page-header">
    <h1>üêï Iconic Dogs Gallery üé®</h1>
    <p>
      Discover our collection of dogs in legendary moments!<br>
      From sports icons to masterpiece paintings
    </p>
  </div>

  <div class="filter-buttons">
    <button class="filter-btn active" onclick="filterCategory('all')">All</button>
    <button class="filter-btn" onclick="filterCategory('Sports')">Sports</button>
    <button class="filter-btn" onclick="filterCategory('Art')">Art</button>
    <button class="filter-btn" onclick="filterCategory('Movies')">Movies</button>
    <button class="filter-btn" onclick="filterCategory('Music')">Music</button>
    <button class="filter-btn" onclick="filterCategory('History')">History</button>
    <button class="filter-btn" onclick="filterCategory('Science')">Science</button>
  </div>

  <div id="dogsGrid" class="dogs-grid">
    <div class="loading">Loading iconic dogs...</div>
  </div>
</div>

<script>
  const API_BASE = 'https://all-dogs-rock-api-v2.vercel.app';
  let allDogs = [];
  let currentFilter = 'all';

  async function loadDogs() {
    try {
      const response = await fetch(`${API_BASE}/api/poses/list`);
      const data = await response.json();

      if (data.success) {
        allDogs = data.poses;
        displayDogs(allDogs);
      } else {
        document.getElementById('dogsGrid').innerHTML = '<div class="loading">Failed to load gallery</div>';
      }
    } catch (error) {
      console.error('Error:', error);
      document.getElementById('dogsGrid').innerHTML = '<div class="loading">Error loading gallery</div>';
    }
  }

  function displayDogs(dogs) {
    const grid = document.getElementById('dogsGrid');

    if (dogs.length === 0) {
      grid.innerHTML = '<div class="loading">No dogs found</div>';
      return;
    }

    grid.innerHTML = dogs.map(dog => {
      const imageUrl = dog.templateUrl || dog.thumbnailUrl || 'https://via.placeholder.com/320x320?text=' + encodeURIComponent(dog.name);

      return `
        <div class="dog-item" data-category="${dog.category}">
          <img src="${imageUrl}" alt="${dog.name}" class="dog-img" onerror="this.src='https://via.placeholder.com/320x320?text=${encodeURIComponent(dog.name)}'">
          <div class="dog-details">
            <div class="dog-category">${dog.category}</div>
            <div class="dog-title">${dog.name}</div>
            <div class="dog-desc">${dog.description}</div>
            <button class="shop-btn" onclick="shopDog('${dog.id}', '${encodeURIComponent(dog.name)}', '${encodeURIComponent(imageUrl)}')">
              Shop This Design ‚Üí
            </button>
          </div>
        </div>
      `;
    }).join('');
  }

  function filterCategory(category) {
    currentFilter = category;

    // Update active button
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.classList.add('active');

    // Filter dogs
    if (category === 'all') {
      displayDogs(allDogs);
    } else {
      const filtered = allDogs.filter(dog => dog.category === category);
      displayDogs(filtered);
    }
  }

  function shopDog(dogId, dogName, imageUrl) {
    // Redirect to product or collection page
    window.location.href = `/products/iconic-dog-${dogId}`;
  }

  // Load on page ready
  loadDogs();
</script>
